sap.ui.define(["./baseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/Token","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,s,n,i){"use strict";return e.extend("com.app.centrallibrary.controller.userView",{onInit:function(){const e=new o({ReservedUserName:"",ReservedUserId:"",ReservedBook:""});this.getView().setModel(e,"newReservationModel");const t=this.getOwnerComponent().getRouter();t.attachRoutePatternMatched(this.onCurrentUserDetails,this)},onCurrentUserDetails:function(e){const{userId:t}=e.getParameter("arguments");this.ID=t;const o=e.getParameter("name");const s=this.getView().byId("idUserDataPage");s.bindElement(`/UserLogin(${t})`,{expand:""})},onLogoutPress:function(){debugger;const e=this.getOwnerComponent().getRouter();e.navTo("RouteloginView")},onRefresh:function(){this.getView().byId("idBooksTable").getBinding("items").refresh()},onReserveBookPress:async function(){debugger;const e=this.getView();var o=this.byId("idBooksTable").getSelectedItem();if(o){var s=o.getBindingContext().getObject().availableQuantity,n=o.getBindingContext().getObject().title,i=e.byId("idUserName").getText(),r=e.byId("idUserIdLink").getText();if(s==="0"){const o=e.getModel().bindList("/Reservations");o.create({ReservedUserName:i,ReservedUserId:r,ReservedBook:n});t.show("Reservation Sent to Admin")}else{t.show("Book is available you don't need to reserve")}}else{t.show("Select a book to reserve")}},onFilterCilck:function(){const e=this.getView(),t=e.byId("idUserActiveLoanTable"),o=e.byId("idUserInputValue").getValue();var s=[];o?s.push(new n("borrowingBookName",i.EQ,o)):"";t.getBinding("items").filter(s)},onAllBooksUserPress:async function(){debugger;if(!this.oAllBooksFrag){this.oAllBooksFrag=await this.loadFragment("AllBooksUser")}this.oAllBooksFrag.open()},oncloseAllbooks:function(){if(this.oAllBooksFrag.isOpen()){this.oAllBooksFrag.close()}}})});